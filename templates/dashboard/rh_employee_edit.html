{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modifier Employ√© - RH</title>
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">üõí</div>
                <h2>SuperMarch√© Plus</h2>
                <p>Module Ressources Humaines</p>
            </div>
            
            <nav class="sidebar-nav">
                <a href="{% url 'dashboard_rh' %}" class="nav-item">
                    <span class="icon">üìä</span>
                    <span>Tableau de Bord</span>
                </a>
                <a href="{% url 'rh_employees_list' %}" class="nav-item active">
                    <span class="icon">üë•</span>
                    <span>Employ√©s</span>
                </a>
                <a href="{% url 'rh_create_employee' %}" class="nav-item">
                    <span class="icon">‚ûï</span>
                    <span>Nouvel Employ√©</span>
                </a>
                <a href="{% url 'rh_planifications' %}" class="nav-item">
                    <span class="icon">üìÖ</span>
                    <span>Planifications</span>
                </a>
                <a href="{% url 'rh_presences' %}" class="nav-item">
                    <span class="icon">‚úÖ</span>
                    <span>Pr√©sences</span>
                </a>
                <a href="{% url 'rh_conges' %}" class="nav-item">
                    <span class="icon">üèñÔ∏è</span>
                    <span>Cong√©s</span>
                </a>
                <a href="{% url 'rh_formations' %}" class="nav-item">
                    <span class="icon">üéì</span>
                    <span>Formations</span>
                </a>
                <a href="{% url 'logout' %}" class="nav-item logout">
                    <span class="icon">üö™</span>
                    <span>D√©connexion</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <h1>Modifier Employ√©</h1>
                <div class="user-info">
                    <span>üë§ {{ user.get_full_name }}</span>
                </div>
            </header>

            <!-- Messages -->
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}

            <!-- Formulaire -->
            <div class="card">
                <div class="card-header">
                    <h2>Modifier {{ employe.get_full_name }} ({{ employe.employee_id }})</h2>
                </div>
                <div class="card-body">
                    <form method="POST" style="max-width: 800px;">
                        {% csrf_token %}
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">Pr√©nom *</label>
                                <input type="text" name="first_name" value="{{ employe.first_name }}" required style="width: 100%; padding: 10px; border: 1px solid #D1D5DB; border-radius: 8px;">
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">Nom *</label>
                                <input type="text" name="last_name" value="{{ employe.last_name }}" required style="width: 100%; padding: 10px; border: 1px solid #D1D5DB; border-radius: 8px;">
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">Email</label>
                                <input type="email" name="email" value="{{ employe.email }}" style="width: 100%; padding: 10px; border: 1px solid #D1D5DB; border-radius: 8px;">
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">T√©l√©phone</label>
                                <input type="text" name="telephone" value="{{ employe.telephone }}" style="width: 100%; padding: 10px; border: 1px solid #D1D5DB; border-radius: 8px;">
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">R√¥le *</label>
                                <select name="role" required style="width: 100%; padding: 10px; border: 1px solid #D1D5DB; border-radius: 8px;">
                                    <option value="DG" {% if employe.role == 'DG' %}selected{% endif %}>Directeur G√©n√©ral</option>
                                    <option value="DAF" {% if employe.role == 'DAF' %}selected{% endif %}>Directeur Administratif et Financier</option>
                                    <option value="RH" {% if employe.role == 'RH' %}selected{% endif %}>Responsable RH</option>
                                    <option value="STOCK" {% if employe.role == 'STOCK' %}selected{% endif %}>Gestionnaire Stock</option>
                                    <option value="CAISSIER" {% if employe.role == 'CAISSIER' %}selected{% endif %}>Caissier</option>
                                    <option value="MARKETING" {% if employe.role == 'MARKETING' %}selected{% endif %}>Marketing</option>
                                    <option value="ANALYSTE" {% if employe.role == 'ANALYSTE' %}selected{% endif %}>Analyste</option>
                                </select>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">D√©partement *</label>
                                <select name="departement" required style="width: 100%; padding: 10px; border: 1px solid #D1D5DB; border-radius: 8px;">
                                    <option value="DIRECTION" {% if employe.departement == 'DIRECTION' %}selected{% endif %}>Direction G√©n√©rale</option>
                                    <option value="FINANCE" {% if employe.departement == 'FINANCE' %}selected{% endif %}>Finance</option>
                                    <option value="RH" {% if employe.departement == 'RH' %}selected{% endif %}>Ressources Humaines</option>
                                    <option value="LOGISTIQUE" {% if employe.departement == 'LOGISTIQUE' %}selected{% endif %}>Logistique</option>
                                    <option value="VENTES" {% if employe.departement == 'VENTES' %}selected{% endif %}>Ventes</option>
                                    <option value="MARKETING" {% if employe.departement == 'MARKETING' %}selected{% endif %}>Marketing</option>
                                    <option value="ALIMENTAIRE" {% if employe.departement == 'ALIMENTAIRE' %}selected{% endif %}>Alimentaire</option>
                                    <option value="HYGIENE" {% if employe.departement == 'HYGIENE' %}selected{% endif %}>Hygi√®ne</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Horaires de Travail -->
                        <div style="background: #F3F4F6; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                            <h3 style="margin: 0 0 15px 0; color: #1F2937; font-size: 16px;">‚è∞ Configuration des Horaires de Travail</h3>
                            <p style="margin: 0 0 15px 0; color: #6B7280; font-size: 14px;">
                                ‚ÑπÔ∏è Ces horaires permettent l'enregistrement automatique des pr√©sences lors de la connexion/d√©connexion de l'employ√©.
                            </p>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">Heure D√©but *</label>
                                    <input type="time" name="heure_debut_travail" value="{{ employe.heure_debut_travail|default:'08:00' }}" required style="width: 100%; padding: 10px; border: 1px solid #D1D5DB; border-radius: 8px;">
                                    <small style="color: #6B7280; font-size: 12px;">D√©but de journ√©e</small>
                                </div>
                                
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">Heure Fin *</label>
                                    <input type="time" name="heure_fin_travail" value="{{ employe.heure_fin_travail|default:'17:00' }}" required style="width: 100%; padding: 10px; border: 1px solid #D1D5DB; border-radius: 8px;">
                                    <small style="color: #6B7280; font-size: 12px;">Fin de journ√©e</small>
                                </div>
                                
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">Pause (minutes) *</label>
                                    <input type="number" name="duree_pause" value="{{ employe.duree_pause|default:'90' }}" required min="0" max="480" style="width: 100%; padding: 10px; border: 1px solid #D1D5DB; border-radius: 8px;">
                                    <small style="color: #6B7280; font-size: 12px;">Dur√©e pause d√©jeuner</small>
                                </div>
                            </div>
                            
                            <div style="background: #FEF3C7; padding: 12px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #F59E0B;">
                                <p style="margin: 0; color: #92400E; font-size: 13px; line-height: 1.5;">
                                    <strong>üìã R√®gles de pr√©sence automatiques :</strong><br>
                                    ‚Ä¢ <strong>Pr√©sent</strong> : Arriv√©e ‚â§ 15min de retard + au moins 60% des heures travaill√©es<br>
                                    ‚Ä¢ <strong>Retard</strong> : Arriv√©e entre 15-60min de retard + au moins 60% des heures travaill√©es<br>
                                    ‚Ä¢ <strong>Absent</strong> : Arriv√©e > 60min de retard OU moins de 60% des heures travaill√©es
                                </p>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="checkbox" name="est_actif" {% if employe.est_actif %}checked{% endif %} style="margin-right: 8px; width: 18px; height: 18px;">
                                <span style="font-weight: 600; color: #374151;">Employ√© Actif</span>
                            </label>
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-top: 30px;">
                            <button type="submit" style="background: linear-gradient(135deg, #2563EB, #1E40AF); color: white; padding: 12px 32px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; flex: 1;">
                                ‚úÖ Enregistrer les Modifications
                            </button>
                            <a href="{% url 'rh_employees_list' %}" style="background: #6B7280; color: white; padding: 12px 32px; border-radius: 8px; font-weight: 600; text-decoration: none; text-align: center; flex: 1;">
                                ‚ùå Annuler
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
