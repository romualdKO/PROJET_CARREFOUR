{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cr√©er un Employ√© - SuperMarch√© Plus</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="dashboard-layout">
        <aside class="sidebar">
            <div style="text-align: center; padding: 0 1.5rem; margin-bottom: 2rem;">
                <div style="width: 60px; height: 60px; background: var(--primary-blue); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto; color: white; font-size: 2rem;">üë•</div>
                <h3 style="margin-top: 1rem;">Ressources Humaines</h3>
            </div>
            <ul class="sidebar-menu">
                <li><a href="{% url 'dashboard_rh' %}"><span class="icon">üìä</span> Tableau de Bord</a></li>
                <li><a href="{% url 'rh_create_employee' %}" class="active"><span class="icon">‚ûï</span> Nouvel Employ√©</a></li> 
            </ul>
            <div style="padding: 1.5rem; margin-top: auto;">
                <a href="{% url 'logout' %}" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: var(--bg-gray); border-radius: 8px; text-decoration: none; color: var(--text-dark);"><span>üö™</span><span>D√©connexion</span></a>
            </div>
        </aside>
        <main class="main-content">
            <div class="page-header">
                <h1>Cr√©er un Nouvel Employ√©</h1>
                <p>Cr√©er un compte employ√© avec identifiants de connexion</p>
            </div>

            {% if messages %}
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }}" style="padding: 1rem; margin-bottom: 1.5rem; border-radius: 8px; {% if message.tags == 'success' %}background: #d4edda; color: #155724; border: 1px solid #c3e6cb;{% elif message.tags == 'error' %}background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;{% endif %}">
                    {{ message }}
                </div>
                {% endfor %}
            {% endif %}

            <div class="chart-container">
                <form method="post" style="padding: 2rem;">
                    {% csrf_token %}
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                        <div>
                            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Pr√©nom *</label>
                            <input type="text" name="first_name" required class="form-input" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-gray); border-radius: 8px;">
                        </div>
                        
                        <div>
                            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Nom *</label>
                            <input type="text" name="last_name" required class="form-input" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-gray); border-radius: 8px;">
                        </div>
                    </div>

                    <div style="margin-top: 1.5rem;">
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Email *</label>
                        <input type="email" name="email" required class="form-input" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-gray); border-radius: 8px;">
                    </div>

                    <div style="margin-top: 1.5rem; padding: 1.5rem; background: #dbeafe; border-left: 4px solid #3b82f6; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem 0; color: #1e40af; display: flex; align-items: center; gap: 0.5rem;">
                            <span>üîê</span> Identifiants de Connexion
                        </h4>
                        <p style="margin: 0; color: #1e3a8a; line-height: 1.6; font-size: 0.95rem;">
                            Les identifiants seront <strong>g√©n√©r√©s automatiquement</strong> lors de la cr√©ation :<br>
                            ‚Ä¢ <strong>ID Employ√©</strong> : EMP001, EMP002, EMP003... (auto-incr√©ment√©)<br>
                            ‚Ä¢ <strong>Nom d'utilisateur</strong> : Identique √† l'ID employ√©<br>
                            ‚Ä¢ <strong>Mot de passe temporaire</strong> : Carrefour2025! + 4 chiffres al√©atoires<br><br>
                            <small><em>üí° Les identifiants seront affich√©s apr√®s la cr√©ation. L'employ√© devra changer son mot de passe lors de sa premi√®re connexion.</em></small>
                        </p>
                    </div>

                    <div style="margin-top: 1.5rem;">
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">R√¥le / Poste *</label>
                        <select name="role" required class="form-input" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-gray); border-radius: 8px;">
                            <option value="">-- S√©lectionner un r√¥le --</option>
                            <option value="STOCK">Gestionnaire de Stock</option>
                            <option value="CAISSIER">Caissier</option>
                            <option value="MARKETING">Marketing / Fid√©lisation</option>
                            <option value="ANALYSTE">Analyste</option>
                            <option value="RH">Responsable RH</option>
                        </select>
                        <small style="color: var(--text-light); font-size: 0.85rem;">‚ö†Ô∏è Les comptes DG et DAF ne peuvent pas √™tre cr√©√©s ici</small>
                    </div>

                    <!-- Horaires de Travail -->
                    <div style="margin-top: 2rem; padding: 1.5rem; background: #F3F4F6; border-radius: 8px;">
                        <h3 style="margin: 0 0 1rem 0; color: #1F2937; font-size: 16px;">‚è∞ Configuration des Horaires de Travail</h3>
                        <p style="margin: 0 0 1rem 0; color: #6B7280; font-size: 14px;">
                            ‚ÑπÔ∏è Ces horaires permettent l'enregistrement automatique des pr√©sences lors de la connexion/d√©connexion.
                        </p>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                            <div>
                                <label class="form-label">Heure D√©but *</label>
                                <input type="time" name="heure_debut_travail" value="08:00" required class="form-input">
                                <small style="color: #6B7280; font-size: 12px;">D√©but de journ√©e</small>
                            </div>
                            
                            <div>
                                <label class="form-label">Heure Fin *</label>
                                <input type="time" name="heure_fin_travail" value="17:00" required class="form-input">
                                <small style="color: #6B7280; font-size: 12px;">Fin de journ√©e</small>
                            </div>
                            
                            <div>
                                <label class="form-label">Pause (minutes) *</label>
                                <input type="number" name="duree_pause" value="90" required min="0" max="480" class="form-input">
                                <small style="color: #6B7280; font-size: 12px;">Dur√©e pause d√©jeuner</small>
                            </div>
                        </div>
                        
                        <div style="background: #FEF3C7; padding: 12px; border-radius: 6px; margin-top: 1rem; border-left: 4px solid #F59E0B;">
                            <p style="margin: 0; color: #92400E; font-size: 13px; line-height: 1.5;">
                                <strong>üìã R√®gles de pr√©sence automatiques :</strong><br>
                                ‚Ä¢ <strong>Pr√©sent</strong> : Arriv√©e ‚â§ 15min de retard + au moins 60% des heures travaill√©es<br>
                                ‚Ä¢ <strong>Retard</strong> : Arriv√©e entre 15-60min de retard + au moins 60% des heures travaill√©es<br>
                                ‚Ä¢ <strong>Absent</strong> : Arriv√©e > 60min de retard OU moins de 60% des heures travaill√©es
                            </p>
                        </div>
                    </div>

                    <div style="margin-top: 2rem; padding: 1.5rem; background: #e0f2fe; border-left: 4px solid #0284c7; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem 0; color: #075985; display: flex; align-items: center; gap: 0.5rem;">
                            <span>‚ÑπÔ∏è</span> Acc√®s aux Tableaux de Bord
                        </h4>
                        <p style="margin: 0; color: #0c4a6e; line-height: 1.6;">
                            L'acc√®s aux diff√©rents tableaux de bord est <strong>automatiquement d√©termin√© par le r√¥le</strong> de l'employ√© :<br>
                            ‚Ä¢ <strong>STOCK</strong> ‚Üí Dashboard Stock<br>
                            ‚Ä¢ <strong>RH</strong> ‚Üí Dashboard RH<br>
                            ‚Ä¢ <strong>CAISSIER</strong> ‚Üí Dashboard Caisse & POS<br>
                            ‚Ä¢ <strong>MARKETING</strong> ‚Üí Dashboard Marketing<br>
                            ‚Ä¢ <strong>DG</strong> ‚Üí Dashboard Direction G√©n√©rale<br>
                            ‚Ä¢ <strong>DAF</strong> ‚Üí Dashboard Finances
                        </p>
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button type="submit" class="btn btn-primary" style="flex: 1;">
                            <span style="margin-right: 0.5rem;">‚úÖ</span> Cr√©er l'employ√©
                        </button>
                        <a href="{% url 'dashboard_rh' %}" class="btn btn-secondary" style="flex: 1; text-align: center; text-decoration: none;">
                            <span style="margin-right: 0.5rem;">‚ùå</span> Annuler
                        </a>
                    </div>
                </form>
            </div>
        </main>
    </div>
</body>
</html>
